function _fetch(url, opts){
    let options = {
        method: 'POST',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        mode: 'cors',
        cache: 'default'
    }

    if (_.isObject(opts)){
        options = _.extend({}, options, opts)
    }

    if (options.body){
        if (_.isObject(options.body)){
            options.body = JSON.stringify(options.body)
        }
    }

    return fetch( url, options)
        .then( (response) => response.json() )
        .then( (data) => {
            return data;
        })
        .catch((error) => {
            console.error(error);
        });
}

export default async function(url, options){
    let _data = await _fetch(url, options);
    return _data;
}
